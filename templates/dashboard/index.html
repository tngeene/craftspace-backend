{% extends 'dashboard/base.html' %}

{% block content %}
<div class="row">
    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-purple">
            <div class="card-body">
                <div class="media d-flex align-items-center ">
                    <div class="mr-4 rounded-circle bg-white sr-icon-box text-purple">
                        <i class="vl_user-female"></i>
                    </div>
                    <div class="media-body text-light">
                        <h4 class="text-uppercase mb-0 weight500">{{  artists_count }}</h4>
                        <span> Artists </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-turquoise">
            <div class="card-body">
                <div class="media d-flex align-items-center ">
                    <div class="mr-4 rounded-circle bg-white sr-icon-box text-purple">
                        <i class="vl_user-male"></i>
                    </div>
                    <div class="media-body text-light">
                        <h4 class="text-uppercase mb-0 weight500"> {{ collectors_count }} </h4>
                        <span>Collectors</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-pink">
            <div class="card-body">
                <div class="media d-flex align-items-center">
                    <div class="mr-4 rounded-circle bg-white  sr-icon-box text-primary">
                        <i class="vl_cart-full"></i>
                    </div>
                    <div class="media-body text-white">
                        <h4 class="text-uppercase mb-0 weight500">{{ orders_count }}</h4>
                        <span>Orders</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-light-red">
            <div class="card-body">
                <div class="media d-flex align-items-center">
                    <div class="mr-4 rounded-circle bg-white  sr-icon-box text-primary">
                        <i class="vl_cart-empty"></i>
                    </div>
                    <div class="media-body text-white">
                        <h4 class="text-uppercase mb-0 weight500">{{ custom_orders_count }}</h4>
                        <span>Custom Orders</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-info">
            <div class="card-body">
                <div class="media d-flex align-items-center">
                    <div class="mr-4 rounded-circle bg-white sr-icon-box text-danger">
                        <i class="vl_pen-paper"></i>
                    </div>
                    <div class="media-body text-white">
                        <h4 class="text-uppercase mb-0 weight500">{{ products_count }}</h4>
                        <span>Art Pieces</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-success">
            <div class="card-body">
                <div class="media d-flex align-items-center">
                    <div class="mr-4 rounded-circle bg-white sr-icon-box text-success">
                        <i class="vl_calendar"></i>
                    </div>
                    <div class="media-body text-white">
                        <h4 class="text-uppercase mb-0 weight500"> {{ events_count }} </h4>
                        <span>Exhibitions</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card mb-4 bg-gray">
            <div class="card-body">
                <div class="media d-flex align-items-center">
                    <div class="mr-4 rounded-circle bg-white sr-icon-box text-success">
                        <i class="vl_user-male"></i>
                    </div>
                    <div class="media-body text-white">
                        <h4 class="text-uppercase mb-0 weight500">4</h4>
                        <span>System users</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="text-center py-3">Recently Registered Artists </h3>

                <div class="table-responsive">

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Phone number</th>
                                <th>Email</th>
                                <th>Date Registered</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for user in recent_artists %}
                            <tr>
                                <td>{{ user.get_full_name }}</td>
                                <td> {{ user.phone_number }} </td>
                                <td> {{ user.email }} </td>
                                <td> {{ user.date_joined }} </td>
                                <td>
                                    <a href="{% url 'dashboard:artist_details' user.pk %}">
                                        <button class="btn btn-primary btn-sm">View</button>
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr class="text-center">
                                <td colspan="5">No Artists Registered Yet.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="text-center py-3">Recently Registered Collectors </h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Phone number</th>
                                <th>Email</th>
                                <th>Date Registered</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in recent_collectors %}
                            <tr>
                                <td>{{ user.get_full_name }}</td>
                                <td> {{ user.phone_number }} </td>
                                <td> {{ user.email }} </td>
                                <td> {{ user.date_joined }} </td>
                                <td>
                                    <a href="{% url 'dashboard:collector_details' user.pk %}">
                                        <button class="btn btn-primary btn-sm">View</button>
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr class="text-center">
                                <td colspan="5">No Collectors Registered Yet.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="text-center py-3">Recently Uploaded Art Pieces </h3>

                <div class="table-responsive">

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Description</th>
                                <th>Has 3D</th>
                                <th>Uploaded By</th>
                                <th>Uploaded On</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for product in recent_products %}
                            <tr>
                                <td>{{ product.name }}</td>
                                <td>{{ product.category.name }}</td>
                                <td>{{ product.description|truncatechars:50 }} </td>
                                {% if product.spin_image %}
                                <td> <span class="badge badge-pill badge-success">Yes</span> </td>
                                {% else %}
                                <td> <span class="badge badge-pill badge-info">No</span> </td>
                                {% endif %}
                                <td>{{ product.uploaded_by.get_full_name }} </td>
                                <td>{{ product.created_on }} </td>
                                <td>
                                    <a href="{% url 'dashboard:product_details' product.pk %}">
                                        <button class="btn btn-primary btn-sm">View</button>
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr class="text-center">
                                <td colspan="5">No Art Pieces Uploaded Yet.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="text-center py-3">Recently Uploaded Exhibitions </h3>

                <div class="table-responsive">

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Description</th>
                                <th>Uploaded By</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for event in recent_events %}
                            <tr>
                                <td>{{ event.name }}</td>
                                <td> {{ event.description|truncatechars:50 }} </td>
                                <td> {{ event.uploaded_by.get_full_name }} </td>
                                <td>
                                    <a href="{% url 'dashboard:event_details' event.pk %}">
                                        <button class="btn btn-primary btn-sm">View</button>
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr class="text-center">
                                <td colspan="5">No Exhibitions Uploaded Yet.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="text-center py-3">Recently Placed Orders</h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>No. of Pieces</th>
                                <th>Ordered By</th>
                                <th>Email</th>
                                <th>Total Price</th>
                                <th>Order Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in  recent_orders %}
                            <tr>
                                <td>{{order.order_items.all.count}}</td>
                                {% if order.user %}
                                <td>{{ order.user.get_full_name }}</td>
                                {% elif order.first_name or order_last_name %}
                                <td>{{ order.first_name}} {{ order.last_name}}</td>
                                {% endif %}
                                <td>{{ order.email }}</td>
                                <td>{{ order.order_total }}</td>
                                {% if order.status  == 'placed' %}
                                <td> <span class="badge badge-pill badge-warning">Pending Payment</span> </td>
                                {% elif order.status == 'paid' %}
                                <td> <span class="badge badge-pill badge-success">Paid</span> </td>
                                {% elif order.status == 'created' %}
                                <td> <span class="badge badge-pill badge-info">Placed</span> </td>
                                {% endif %}
                                <td>
                                    <a href="{% url 'dashboard:order_details' order.pk %}">
                                        <button class="btn btn-primary btn-sm">View</button>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="text-center py-3">Recently Placed Custom Orders</h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Requested By</th>
                                <th>Email</th>
                                <th>Artist</th>
                                <th>Order Status</th>
                                <th>Due Date</th>
                                <th>Placed On</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in  recent_custom_orders %}
                            <tr>
                                <td> {{ order.description|truncatechars:50 }} </td>
                                <td>{% if order.requested_by %}
                                    {{ order.requested_by.get_full_name }}
                                    {% else %}
                                    {{ order.first_name }} {{ order.last_name }}
                                    {% endif %}</td>
                                <td> {{order.email}} </td>
                                <td>{{ order.artist.get_full_name }}</td>
                                {% if order.is_complete %}
                                <td> <span class="badge badge-pill badge-success">Done</span> </td>
                                {% else %}
                                <td> <span class="badge badge-pill badge-warning">Pending Completion</span> </td>
                                {% endif %}
                                <td>{{ order.due_date }}</td>
                                <td>{{ order.created_on }}</td>
                                <td>{{ order.order_total }}</td>
                                {% if order.status  == 'placed' %}
                                <td> <span class="badge badge-pill badge-info">Pending Payment</span> </td>
                                {% elif order.status == 'paid' %}
                                <td> <span class="badge badge-pill badge-success">Paid</span> </td>
                                {% endif %}
                                <td>
                                    <a href="{% url 'dashboard:custom_order_details' order.pk %}">
                                        <button class="btn btn-primary btn-sm">View</button>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}